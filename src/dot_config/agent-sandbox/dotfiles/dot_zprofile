# XDG Base Directory Specification
export XDG_CONFIG_HOME="$HOME/.config"
export XDG_CACHE_HOME="$HOME/.cache"
export XDG_DATA_HOME="$HOME/.local/share"
export XDG_STATE_HOME="$HOME/.local/state"

# XDG paths for programs that support it
export CARGO_HOME="$XDG_DATA_HOME/cargo"
export NPM_CONFIG_CACHE="$XDG_CACHE_HOME/npm"
export LESSHISTFILE="$XDG_STATE_HOME/less/history"

# Create XDG directories
mkdir -p "$XDG_CONFIG_HOME" "$XDG_CACHE_HOME" "$XDG_DATA_HOME" "$XDG_STATE_HOME" \
  "$CARGO_HOME" "$XDG_STATE_HOME/less" "$XDG_STATE_HOME/zsh"

# Editor and pager
export EDITOR='vim'
export VISUAL='vim'
export PAGER='less'
export LESS='-g -i -M -R -S -w -X -z-4'

if [[ -z "$LANG" ]]; then
  export LANG='en_US.UTF-8'
fi

# Ensure path arrays do not contain duplicates
typeset -gU cdpath fpath mailpath path

# Set the list of directories that Zsh searches for programs
path=(
  $HOME/.local/{,s}bin(N)
  /usr/local/{,s}bin(N)
  $path
)

# Less input preprocessor
if [[ -z "$LESSOPEN" ]] && (( $#commands[(i)lesspipe(|.sh)] )); then
  export LESSOPEN="| /usr/bin/env $commands[(i)lesspipe(|.sh)] %s 2>&-"
fi

